<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stock Visualization with d3.js</title>

    <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<body>
<svg width="960" height="500"></svg>
</body>
</html>
<script>
    d3.json('https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=MSFT&interval=5min&apikey=demo')
        .then(function (data) {
            var margin = {top: 20, right: 20, bottom: 30, left: 50};
            var svg = d3.select('svg');
            var g = svg.append('g')
                .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');
            var width = +svg.attr('width') - margin.left - margin.right;
            var height = +svg.attr('height') - margin.top - margin.bottom;
            var time_series = data['Time Series (5min)'];
            var parseTime = d3.timeParse('%Y-%m-%d %H:%M:%S');

            var x = d3.scaleTime()
                .rangeRound([0, width]);

            var y = d3.scaleLinear()
                .rangeRound([height, 0]);

            var line = d3.line()
                .x(function (d) {
                    return x(d.time);
                })
                .y(function (d) {
                    return y(d['4. close'])
                });

            var quotes = Object.keys(time_series).sort().map(
                function (key) {
                    time_series[key].time = parseTime(key);
                    return time_series[key];
                }
            );

            x.domain(d3.extent(quotes, function (d) {
                return d.time;
            }));
            y.domain(d3.extent(quotes, function (d) {
                return d['4. close'];
            }));

            g.append('g')
                .attr('transform', 'translate(0,' + height + ')')
                .call(d3.axisBottom(x))
                .select('.domain')
                .remove();

            g.append('g')
                .call(d3.axisLeft(y))
                .append('text')
                .attr('fill', '#000')
                .attr('transform', 'rotate(-90)')
                .attr('y', 6)
                .attr('dy', '0.71em')
                .attr('text-anchor', 'end')
                .text('Price (USD)');

            g.append('path')
                .datum(quotes)
                .attr('fill', 'none')
                .attr('stroke', 'steelblue')
                .attr('stroke-linejoin', 'round')
                .attr('stroke-linecap', 'round')
                .attr('stroke-width', 1.5)
                .attr('d', line);
        });
</script>
